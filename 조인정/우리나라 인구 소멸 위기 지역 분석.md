# 우리나라 인구 소멸 위기 지역 분석

> 데이터 시각화로 인구 소멸 위기감 극대화시키기

- 목표 명확히 하기

1. 인구 소멸 위기 지역 기준 바로알기
   - 65세 이상 노인 인구와 20~39세 여성 인구를 비교해서 젊은 여성인구가 노인 인구의 절반에 미달할 경우
2. 필요한 데이터
   - 65세 이상 노인 인구수
   - 20~30대 여성 인구수
   - 한국 지도 그리는 법 (시각화)
3. 결과
   - 인구 소멸 위기 지역인지 파악하기
   - 지도에 시각화하기



## 1. 인구 데이터 확보하기

- 데이터 출처 : 국가통계포털

- 사전 작업

  - import

  ```python
  import pandas
  import numpy
  import platform
  import matplotlib.pyplot
  
  %matplotlib inline
  // IPython 에서 제공하는 Rich output 에 대한 표현 방식
  // Rich output이란 그림, 소리, 애니메이션 과 같은 결과물들.
  ```

  - font 설정

  ```python
  path = "C:/Windows/Fonts/malgun.ttf"
  from matplotlib import font_manager, rc
  if platform.system() == 'Windows':
      font_name = font_manager.FontProperties(fname=path).get_name()
      rc('font', family=font_name)
  else:
      print('Unknown system/...')
  
  plt.rcParams['axes.unicode_minus'] = False
  ```



- 데이터 정리하기1

  - rename()
    - columns = {'origin name' : 'new name'}
    - inplace : default=False, True-value of copy is ignored
    - axis : default=index, (index, column)=(0, 1)

  - 행 삭제
    - a = a[(a['A'] != 'B')] : a데이터의 A열에서 B라는 값이 아닌 행만 저장. 즉, B가 들어가는 행 삭제.
  - 위치 찾기
    - a.loc['행', '열']

- 데이터 정리하기2

  - 구분이 많을 때
    - `pivot_table`
      - values : 열 나타낼 값
      - index : 행 순서 나타낼 때 기준
      - columns : 열의 구분 
      - aggfunc : 동일한 값일 때 처리할 함수
  - index 처리하기
    - reset_index : 기존의 index(pivot_table만들 때 생성했던 index)가 column으로 추가되고 새로운 index가 생성
    - reset_index(drop=True) : 기존의 index 삭제하고 새로운 index(0, 1, ...) 생성

- 지도 그리기

  - Folium

    ```python
    import folium
    import json
    import warnings
    warnings.simplefilter(action='ignore', category=FutureWarning)
    ```

    - 지도

    ```python
    geo_path = '../data/05. skorea_municipalities_geo_simple.json'
    geo_str = json.load(open(geo_path, encoding='utf-8'))
    
    // 위도와 경도의 정보는 구글맵 주소에서 알 수 있다.
    // 초기 위치의 위도, 경도와 확대크기를 설정한다.
    map = folium.Map(location=[36.2002, 127.054], zoom_start=7)
    
    // choropleth : 단계구분
    map.choropleth(geo_data = geo_str,
                   data = pop_folium['인구수합계'],
                   columns = [pop_folium.index, pop_folium['인구수합계']],
                   fill_color = 'YlGnBu', #PuRd, YlGnBu
                   key_on = 'feature.id')
    map
    ```

    



